{
    "scene_array": [
        {
            "data": "{\n    \"connections\": [\n        {\n            \"in_id\": \"{6eb01f0e-9c49-438b-a73e-5354052a299b}\",\n            \"in_index\": 0,\n            \"out_id\": \"{d95e6de7-26c0-40d4-883a-c8a58a13f790}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{038c09b5-0801-4096-bde7-256f703ad606}\",\n            \"in_index\": 0,\n            \"out_id\": \"{74a020e2-5bce-4787-8727-fb1aab7cb3e4}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{c2c5612a-668e-4a99-a6d4-c5006ae4d197}\",\n            \"in_index\": 0,\n            \"out_id\": \"{90345446-0910-4302-b76f-007a0d3ac13a}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{6eb01f0e-9c49-438b-a73e-5354052a299b}\",\n            \"in_index\": 1,\n            \"out_id\": \"{ffe07801-cba7-4884-8fc3-d7496b827e5d}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{74a020e2-5bce-4787-8727-fb1aab7cb3e4}\",\n            \"in_index\": 0,\n            \"out_id\": \"{c2c5612a-668e-4a99-a6d4-c5006ae4d197}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{d95e6de7-26c0-40d4-883a-c8a58a13f790}\",\n            \"in_index\": 0,\n            \"out_id\": \"{56c044b1-8a49-4b4e-9424-c59f18b07996}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{91b8c653-d85b-4667-be84-55c04e22f4b6}\",\n            \"in_index\": 0,\n            \"out_id\": \"{a5d2b8a1-81a4-4ee0-a195-400ccb4323f5}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{dd6ca20e-f08f-45cf-876f-8cae7bd5d116}\",\n            \"in_index\": 0,\n            \"out_id\": \"{038c09b5-0801-4096-bde7-256f703ad606}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{9fa5ea38-39ec-4f2e-923c-276b2d2448ba}\",\n            \"in_index\": 0,\n            \"out_id\": \"{56c044b1-8a49-4b4e-9424-c59f18b07996}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{ffe07801-cba7-4884-8fc3-d7496b827e5d}\",\n            \"in_index\": 0,\n            \"out_id\": \"{038c09b5-0801-4096-bde7-256f703ad606}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{56c044b1-8a49-4b4e-9424-c59f18b07996}\",\n            \"in_index\": 0,\n            \"out_id\": \"{932f5e0e-491c-4fd0-9a25-130d0891f293}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{4abaf3e2-cd50-4c30-a2f3-ecf28da40144}\",\n            \"in_index\": 0,\n            \"out_id\": \"{6eb01f0e-9c49-438b-a73e-5354052a299b}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{90345446-0910-4302-b76f-007a0d3ac13a}\",\n            \"in_index\": 0,\n            \"out_id\": \"{c2c5612a-668e-4a99-a6d4-c5006ae4d197}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{a5d2b8a1-81a4-4ee0-a195-400ccb4323f5}\",\n            \"in_index\": 0,\n            \"out_id\": \"{91b8c653-d85b-4667-be84-55c04e22f4b6}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{932f5e0e-491c-4fd0-9a25-130d0891f293}\",\n            \"in_index\": 0,\n            \"out_id\": \"{91b8c653-d85b-4667-be84-55c04e22f4b6}\",\n            \"out_index\": 0\n        }\n    ],\n    \"nodes\": [\n        {\n            \"id\": \"{932f5e0e-491c-4fd0-9a25-130d0891f293}\",\n            \"model\": {\n                \"data\": {\n                    \"console\": \"\",\n                    \"js_code\": \"if(!hasGlobal(\\\"AiAct\\\")){\\n\\tsetGlobal(\\\"AiAct\\\",\\\"deaction\\\")\\n}\\nif(!hasGlobal(\\\"car_Front\\\")){\\n\\tsetGlobal(\\\"car_Front\\\",\\\"False\\\")\\n}\\n\\npayload.AiAct = getGlobal(\\\"AiAct\\\")\\npayload.car_Front = getGlobal(\\\"car_Front\\\")\",\n                    \"widget_state\": {\n                        \"editor_setting\": {\n                            \"autoComplete\": {\n                                \"caseSensitivity\": true,\n                                \"enable\": true,\n                                \"threshold\": 3\n                            },\n                            \"indent\": {\n                                \"enable\": true\n                            },\n                            \"theme\": \"Material Dark\",\n                            \"whitespace\": {\n                                \"enable\": false,\n                                \"size\": 2\n                            }\n                        }\n                    }\n                },\n                \"name\": \"JavaScript\",\n                \"node_enable\": true\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"fix\": false,\n                \"x\": -18.318783999999326,\n                \"y\": -228.95475899999948\n            }\n        },\n        {\n            \"id\": \"{4abaf3e2-cd50-4c30-a2f3-ecf28da40144}\",\n            \"model\": {\n                \"data\": {\n                    \"auto_start\": true,\n                    \"caption\": \"\",\n                    \"code\": \"import paho.mqtt.client as mqtt\\r\\nimport json\\r\\nimport time\\r\\n\\r\\nbroker_address = \\\"broker-mqtt.local\\\" #เปลี่ยนตาม ip หรือ ชื่อ broker server ได้เลย\\r\\nport = 1883\\r\\ntopic_pub_b = \\\"traffic/detect/B\\\"\\r\\n\\r\\nclient = mqtt.Client(mqtt.CallbackAPIVersion.VERSION2)\\r\\nclient.connect(broker_address, port)\\r\\nclient.loop_start()\\r\\n\\r\\ndef send_vehicle_data(car_front, car_back):\\r\\n\\tdata = {\\r\\n\\t\\t\\\"front_detected\\\": car_front,\\r\\n\\t\\t\\\"back_detected\\\": car_back,\\r\\n\\t\\t\\\"timestamp\\\": int(time.time())\\r\\n\\t}\\r\\n\\r\\n\\tclient.publish(topic_pub_b, json.dumps(data))\\r\\n\\tprint(\\\"[B] ส่งข้อมูลตรวจจับ:\\\", data)\\r\\n\\r\\n# ใช้ในระบบจริงร่วมกับกล้อง\\r\\ndef handle_request(req):\\r\\n\\tpayload, img = getReqData(req)\\r\\n\\tsend_vehicle_data(payload.get(\\\"car_Front\\\", \\\"False\\\") == \\\"True\\\", payload.get(\\\"car_Back\\\", \\\"False\\\") == \\\"True\\\")\\r\\n\\treturn makeRespData(payload, img)\\r\\n\\r\\n\",\n                    \"editor_setting\": {\n                        \"autoComplete\": {\n                            \"caseSensitivity\": true,\n                            \"enable\": true,\n                            \"threshold\": 3\n                        },\n                        \"indent\": {\n                            \"enable\": true\n                        },\n                        \"theme\": \"Material Dark\",\n                        \"whitespace\": {\n                            \"enable\": false,\n                            \"size\": 2\n                        }\n                    },\n                    \"icon\": \":/cira_bernoulli_python_plus/model/python_plus.png\",\n                    \"not_use_image\": false,\n                    \"python_path\": \"C:/Users/ROG/AppData/Local/Programs/Python/Python310/python.exe\"\n                },\n                \"name\": \"Python+\",\n                \"node_enable\": true\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"fix\": false,\n                \"x\": 729.262183761149,\n                \"y\": -179.02376004610977\n            }\n        },\n        {\n            \"id\": \"{a5d2b8a1-81a4-4ee0-a195-400ccb4323f5}\",\n            \"model\": {\n                \"name\": \"AutoRun\",\n                \"node_enable\": false\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"fix\": false,\n                \"x\": -540.6600049373993,\n                \"y\": -220.27699139599963\n            }\n        },\n        {\n            \"id\": \"{9fa5ea38-39ec-4f2e-923c-276b2d2448ba}\",\n            \"model\": {\n                \"height\": 712,\n                \"name\": \"Debug\",\n                \"output_h\": 0,\n                \"output_v\": 0,\n                \"page_index\": 2,\n                \"payload_h\": 0,\n                \"payload_v\": 0,\n                \"width\": 972\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"fix\": false,\n                \"x\": -618.0648254887252,\n                \"y\": -1120.6958762176562\n            }\n        },\n        {\n            \"id\": \"{038c09b5-0801-4096-bde7-256f703ad606}\",\n            \"model\": {\n                \"data\": {\n                    \"curr_tap\": 0,\n                    \"draw_roi\": true,\n                    \"enable_tracking\": false,\n                    \"font_scale\": 1.2,\n                    \"font_thickness\": 2,\n                    \"frame_buffer\": 5,\n                    \"map_det_cfgs\": [\n                        {\n                            \"backend_name\": \"CUDA\",\n                            \"config_name\": \"kkw\",\n                            \"config_path\": \"D:/CIRaCore/summodel/model/fastest-1.1-320_ciracoco_v1\"\n                        }\n                    ],\n                    \"max_dist\": 150,\n                    \"nms\": 0.4,\n                    \"rect_thickness\": 2,\n                    \"result_drawing\": true,\n                    \"roi_h\": 1400,\n                    \"roi_w\": 1500,\n                    \"roi_x\": 0,\n                    \"roi_y\": 0,\n                    \"show_confidence\": true,\n                    \"text_drawing\": true,\n                    \"this_config_name\": \"kkw\",\n                    \"thresh\": 50,\n                    \"txt_offset\": 5\n                },\n                \"name\": \"DeepDetect \",\n                \"node_enable\": true,\n                \"obj_colors\": {\n                    \"array\": [\n                    ]\n                }\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"fix\": false,\n                \"x\": 187.84079486369495,\n                \"y\": -110.07243318000071\n            }\n        },\n        {\n            \"id\": \"{dd6ca20e-f08f-45cf-876f-8cae7bd5d116}\",\n            \"model\": {\n                \"height\": 708,\n                \"name\": \"Debug\",\n                \"output_h\": 0,\n                \"output_v\": 0,\n                \"page_index\": 2,\n                \"payload_h\": 0,\n                \"payload_v\": 0,\n                \"width\": 967\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"fix\": false,\n                \"x\": 404.39036251369816,\n                \"y\": -1119.7563653473858\n            }\n        },\n        {\n            \"id\": \"{ffe07801-cba7-4884-8fc3-d7496b827e5d}\",\n            \"model\": {\n                \"data\": {\n                    \"console\": \"\",\n                    \"height\": 442,\n                    \"js_code\": \"var objs = payload.DeepDetect.obj_count;\\nvar len = payload.DeepDetect.count;\\n\\nvar isCar = false;\\nfor (var i = 0; i < len; i++) {\\n\\tif (objs[i].name === \\\"person\\\") { //เปลี่ยนเพื่อจะตรวจจับอะไร\\n\\t\\tisCar = true;\\n\\t\\tbreak;\\n\\t}\\n}\\npayload.car_Back = isCar ? \\\"True\\\" : \\\"False\\\";\",\n                    \"widget_state\": {\n                        \"editor_setting\": {\n                            \"autoComplete\": {\n                                \"caseSensitivity\": true,\n                                \"enable\": true,\n                                \"threshold\": 3\n                            },\n                            \"indent\": {\n                                \"enable\": true\n                            },\n                            \"theme\": \"Material Dark\",\n                            \"whitespace\": {\n                                \"enable\": false,\n                                \"size\": 2\n                            }\n                        },\n                        \"splt0\": 348,\n                        \"splt1\": 87\n                    },\n                    \"width\": 400\n                },\n                \"name\": \"JavaScript\",\n                \"node_enable\": true\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"fix\": false,\n                \"x\": 393.8395427571996,\n                \"y\": -121.80197312899918\n            }\n        },\n        {\n            \"id\": \"{74a020e2-5bce-4787-8727-fb1aab7cb3e4}\",\n            \"model\": {\n                \"data\": {\n                    \"console\": \"\",\n                    \"height\": 430,\n                    \"js_code\": \"if(!hasGlobal(\\\"car_Back\\\")){\\n\\tsetGlobal(\\\"car_Back\\\",\\\"False\\\")\\n}\\n\\npayload.car_Back = getGlobal(\\\"car_Back\\\")\",\n                    \"widget_state\": {\n                        \"editor_setting\": {\n                            \"autoComplete\": {\n                                \"caseSensitivity\": true,\n                                \"enable\": true,\n                                \"threshold\": 3\n                            },\n                            \"indent\": {\n                                \"enable\": true\n                            },\n                            \"theme\": \"Material Dark\",\n                            \"whitespace\": {\n                                \"enable\": false,\n                                \"size\": 2\n                            }\n                        },\n                        \"splt0\": 338,\n                        \"splt1\": 85\n                    },\n                    \"width\": 400\n                },\n                \"name\": \"JavaScript\",\n                \"node_enable\": true\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"fix\": false,\n                \"x\": -10.382857128999689,\n                \"y\": -71.12168793699894\n            }\n        },\n        {\n            \"id\": \"{d95e6de7-26c0-40d4-883a-c8a58a13f790}\",\n            \"model\": {\n                \"data\": {\n                    \"console\": \"\",\n                    \"height\": 430,\n                    \"js_code\": \"var objs = payload.DeepDetect.obj_count;\\nvar len = payload.DeepDetect.count;\\n\\nvar isCar = false;\\nfor (var i = 0; i < len; i++) {\\n\\tif (objs[i].name === \\\"person\\\") { //เปลี่ยนเพื่อจะตรวจจับอะไร\\n\\t\\tisCar = true;\\n\\t\\tbreak;\\n\\t}\\n}\\npayload.car_Front = isCar ? \\\"True\\\" : \\\"False\\\";\\n\",\n                    \"widget_state\": {\n                        \"editor_setting\": {\n                            \"autoComplete\": {\n                                \"caseSensitivity\": true,\n                                \"enable\": true,\n                                \"threshold\": 3\n                            },\n                            \"indent\": {\n                                \"enable\": true\n                            },\n                            \"theme\": \"Material Dark\",\n                            \"whitespace\": {\n                                \"enable\": false,\n                                \"size\": 2\n                            }\n                        },\n                        \"splt0\": 338,\n                        \"splt1\": 85\n                    },\n                    \"width\": 642\n                },\n                \"name\": \"JavaScript\",\n                \"node_enable\": true\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"fix\": false,\n                \"x\": 393.57669999999945,\n                \"y\": -219.92707025299964\n            }\n        },\n        {\n            \"id\": \"{6eb01f0e-9c49-438b-a73e-5354052a299b}\",\n            \"model\": {\n                \"name\": \"PayloadCombine\"\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"fix\": false,\n                \"x\": 580.6939321500003,\n                \"y\": -128.78442096000003\n            }\n        },\n        {\n            \"id\": \"{56c044b1-8a49-4b4e-9424-c59f18b07996}\",\n            \"model\": {\n                \"data\": {\n                    \"curr_tap\": 0,\n                    \"draw_roi\": true,\n                    \"enable_tracking\": false,\n                    \"font_scale\": 1.2,\n                    \"font_thickness\": 2,\n                    \"frame_buffer\": 5,\n                    \"map_det_cfgs\": [\n                        {\n                            \"backend_name\": \"CUDA\",\n                            \"config_name\": \"kkw\",\n                            \"config_path\": \"D:/CIRaCore/summodel/model/fastest-1.1-320_ciracoco_v1\"\n                        }\n                    ],\n                    \"max_dist\": 150,\n                    \"nms\": 0.4,\n                    \"rect_thickness\": 2,\n                    \"result_drawing\": true,\n                    \"roi_h\": 1400,\n                    \"roi_w\": 1500,\n                    \"roi_x\": 0,\n                    \"roi_y\": 0,\n                    \"show_confidence\": true,\n                    \"text_drawing\": true,\n                    \"this_config_name\": \"kkw\",\n                    \"thresh\": 50,\n                    \"txt_offset\": 5\n                },\n                \"name\": \"DeepDetect \",\n                \"node_enable\": true,\n                \"obj_colors\": {\n                    \"array\": [\n                    ]\n                }\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"fix\": false,\n                \"x\": 188.4683280963999,\n                \"y\": -232.19898195889994\n            }\n        },\n        {\n            \"id\": \"{91b8c653-d85b-4667-be84-55c04e22f4b6}\",\n            \"model\": {\n                \"data\": {\n                },\n                \"name\": \"WebCam \",\n                \"node_enable\": true,\n                \"setting\": {\n                    \"webcamUUID\": \"\"\n                }\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"fix\": false,\n                \"x\": -266.97424269999976,\n                \"y\": -237.7434861999998\n            }\n        },\n        {\n            \"id\": \"{c2c5612a-668e-4a99-a6d4-c5006ae4d197}\",\n            \"model\": {\n                \"data\": {\n                },\n                \"name\": \"WebCam \",\n                \"node_enable\": true,\n                \"setting\": {\n                    \"webcamUUID\": \"\"\n                }\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"fix\": false,\n                \"x\": -268.9229597999996,\n                \"y\": -37.025624900000004\n            }\n        },\n        {\n            \"id\": \"{90345446-0910-4302-b76f-007a0d3ac13a}\",\n            \"model\": {\n                \"name\": \"AutoRun\",\n                \"node_enable\": false\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"fix\": false,\n                \"x\": -541.7433537999996,\n                \"y\": -56.90253931999988\n            }\n        }\n    ],\n    \"scene_data\": {\n        \"flow_view_fix\": false,\n        \"flow_view_pos_x\": -214.24128466893194,\n        \"flow_view_pos_y\": -697.5536781893038,\n        \"flow_view_zoom_factor\": 0.46650738020973426\n    }\n}\n",
            "name": "Main"
        }
    ]
}
